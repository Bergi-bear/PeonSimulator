---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 18.05.2020 14:04

function AddAxe(data)
	local effmodel="Abilities\\Weapons\\Axe\\AxeMissile.mdl"
	local angle=0
	local eff=AddSpecialEffect(effmodel,0,0)
	BlzSetSpecialEffectRoll(eff,math.rad(-90))
	local lock=0
	local tempUnit=nil
	TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
		local x,y=GetUnitXY(data.UnitHero)
		local CollisionUnit,IsDamage=nil,nil
		angle=angle+9
		--print(angle)

		if lock<=0 then
			local nx,ny=MoveXY(x,y,80,angle)
			BlzSetSpecialEffectPosition(eff,nx,ny,GetUnitZ(data.UnitHero)+60)
			IsDamage,CollisionUnit= UnitDamageArea(data.UnitHero,10,nx,ny,40)
			tempUnit=CollisionUnit
		else
			lock=lock-1
			if IsUnitEnemy(data.UnitHero,GetOwningPlayer(tempUnit)) then
				DestroyEffect(AddSpecialEffect("Bullets\\Bullet1",GetUnitXY(tempUnit)))
			end
		end
		if CollisionUnit then
			lock=4
			if IsUnitEnemy(data.UnitHero,GetOwningPlayer(tempUnit)) then
				DestroyEffect(AddSpecialEffect("Bullets\\Bullet1",GetUnitXY(tempUnit)))
			end
		end
		if angle==360 then
			angle=0
		end
	end)
end